import json
import logging


CEDAR_TEMPLATE_ELEMENT_TYPE = "https://schema.metadatacenter.org/core/TemplateElement"


def convert_template_element(jsonschema_filename):
    try:
        with open(jsonschema_filename, 'r') as orig_schema_file:

            orig_schema = json.load(orig_schema_file)
            cedar_schema = {}
            cedar_schema.update( { "@id": CEDAR_TEMPLATE_ELEMENT_TYPE} )
            cedar_schema.update( { "type": "object"} )
            cedar_schema.update( { "title": orig_schema["title"] } )
            cedar_schema.update( { "description": orig_schema["title"]+ " generated by the mircat2cedar tool."})

            ui_schema = {}
            schema_name = jsonschema_filename [ jsonschema_filename.index("_") :]
            ui_schema.update( { "title": schema_name} )

            cedar_schema.update( { "_ui": ui_schema} )

            #
            # "_ui": {
            #     "title": "vendor",
            #     "description": "Details to the vendor or manufacturer",
            #     "order": [
            #         "name",
            #         "orderNo",
            #         "serialNo",
            #         "lotNo"
            #     ],
            #     "propertyLabels": {
            #         "name": "name",
            #         "orderNo": "orderNo",
            #         "serialNo": "serialNo",
            #         "lotNo": "lotNo"
            #     }
            # },
            #

            return cedar_schema

    except IOError:
        logging.error("Error opening schema file")






